!function(){var t;t={},t.VERSION="0.0.1",window.Architect=t}.call(this),function(){Architect.Worker=function(){function t(){this.callbacks={},this.callbacksQueue={}}return t.prototype.addEventListener=function(t,r){var e;return this.callbacks[t]=r,(e=this.callbacksQueue[t])?(delete this.callbacksQueue[t],this.dispatch(t,e)):void 0},t.prototype.dispatch=function(t,r){return this.callbacks[t]?this.callbacks[t]({data:r}):this.callbacksQueue[t]=r},t.prototype.handleRequest=function(t){return this.dispatch("message",t)},t.prototype.terminate=function(){},t}(),window.Architect.Worker=Architect.Worker}.call(this),function(){var t,r={}.hasOwnProperty,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};Architect.AjaxWorker=function(r){function o(){return t=o.__super__.constructor.apply(this,arguments)}return e(o,r),o.prototype.postMessage=function(t){var r,e=this;return r=new XMLHttpRequest,r.open("GET",t),r.onreadystatechange=function(){return 4===r.readyState&&200===r.status?e.handleRequest(r.responseText):void 0},r.send()},o}(Architect.Worker),window.Architect.AjaxWorker=Architect.AjaxWorker}.call(this),function(){var t={}.hasOwnProperty,r=function(r,e){function o(){this.constructor=r}for(var n in e)t.call(e,n)&&(r[n]=e[n]);return o.prototype=e.prototype,r.prototype=new o,r.__super__=e.prototype,r};Architect.JSONPWorker=function(t){function e(){e.__super__.constructor.call(this),this.jsonpID=0}return r(e,t),e.prototype.postMessage=function(t){var r,e,o=this;return e=document.createElement("script"),r="architect_jsonp"+ ++this.jsonpID,window[r]=function(t){return delete window[r],document.head.removeChild(e),o.handleRequest(t)},e.src=this.appendQuery(t,"callback="+r),document.head.appendChild(e)},e.prototype.appendQuery=function(t,r){return(t+"&"+r).replace(/[&?]{1,2}/,"?")},e}(Architect.Worker),window.Architect.JSONPWorker=Architect.JSONPWorker}.call(this),function(){var t,r={}.hasOwnProperty,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};Architect.ProxyWorker=function(r){function o(){return t=o.__super__.constructor.apply(this,arguments)}return e(o,r),o.prototype.postMessage=function(t){return this.handleRequest(t)},o}(Architect.Worker),window.Architect.ProxyWorker=Architect.ProxyWorker}.call(this),function(){var t;t=function(){function t(){this.VERSION=Architect.VERSION,this.SUPPORT_WORKER=!!window.Worker,this.WORKERS={proxy:{"class":Architect.ProxyWorker,workerPath:"architect/proxy_worker.min.js"},ajax:{"class":Architect.AjaxWorker,workerPath:"architect/ajax_worker.min.js"},jsonp:{"class":Architect.JSONPWorker,workerPath:"architect/jsonp_worker.min.js"}}}return t.prototype.proxy=function(t,r){return this.work(t,"proxy",r)},t.prototype.ajax=function(t,r){return this.work(t,"ajax",r)},t.prototype.jsonp=function(t,r){return this.work(t,"jsonp",r)},t.prototype.work=function(t,r,e){var o;return"function"==typeof r&&(e=r,r=void 0),void 0===r&&(r="proxy"),o=this.spawnWorker(r),o.postMessage(t),o.addEventListener("message",function(t){return o.terminate(),e(t.data)})},t.prototype.spawnWorker=function(t){var r;return this.SUPPORT_WORKER?r=new Worker(this.WORKERS[t].workerPath):new this.WORKERS[t]["class"]},t}(),window.Architect=new t}.call(this);