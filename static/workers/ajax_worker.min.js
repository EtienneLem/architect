/*
* Architect v0.2.0
* http://architectjs.org
*
* Copyright 2013, Etienne Lemay http://heliom.ca
* Released under the MIT license
*/
(function(){var e,t;t=function(e){return postMessage({success:e})},e=function(e){var t,s,n,r,a;for(s={},a=["response","responseText","responseType","status","statusText"],n=0,r=a.length;r>n;n++)t=a[n],s[t]=e[t];return postMessage({error:s})},addEventListener("message",function(s){var n,r,a,o,u,p,c,i,d,f;f=s.data,c=f.type,i=f.url,r=f.data,a=f.dataType,n=f.contentType,p=f.headers,c||(c="GET"),p||(p={}),p["X-Requested-With"]="XMLHttpRequest",n!==!1&&(p["Content-Type"]=n||"application/x-www-form-urlencoded"),d=new XMLHttpRequest,d.open(c,i);for(o in p)u=p[o],d.setRequestHeader(o,u);return d.onreadystatechange=function(){var s,n;if(4===d.readyState){if(d.status>=200&&d.status<300||304===d.status){n=d.responseText;try{"script"===a?(1,eval)(n):"xml"===a?n=d.responseXML:"json"===a&&(n=/^\s*$/.test(n)?null:JSON.parse(n))}catch(r){s=r}return s?e(d):t(n)}return e(d)}},d.send(r)})}).call(this);
